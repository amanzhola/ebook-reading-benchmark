# Ebook Reading Benchmark

Мини-проект для сравнения разных структур данных  
для задачи отслеживания прогресса чтения электронной книги.

## Задача

Поддерживаются запросы:

- `READ user page` — пользователь дочитал до страницы `page`
- `CHEER user` — доля пользователей, прочитавших меньше страниц, чем данный пользователь

Ограничения:

- до **1 000 000** запросов
- до **100 000** пользователей
- до **1000** страниц

Задача чувствительна к асимптотике операций обновления и запросов.

---

## Реализованные решения

| Решение        | Идея                                           | READ           | CHEER          |
|---------------|------------------------------------------------|----------------|----------------|
| Naive         | Массив `at_least[page]`, обновление циклом     | O(page)        | O(1)           |
| Sqrt-decomp   | √-декомпозиция по страницам                    | O(1)           | O(√P)          |
| Fenwick Tree  | Дерево Фенвика по страницам                    | O(log P)       | O(log P)       |

---

## Генерация тестов

Используется генератор с **усиленной нагрузкой на обновления**,  
чтобы наглядно проявить разницу между алгоритмами.

Параметры генератора:

- **1 000 000** запросов
- **90% READ / 10% CHEER**
- случайный пользователь (`1 … 100000`)
- первая операция `READ` для пользователя:
  - страница в диапазоне **[400; 700]**
- последующие `READ`:
  - увеличение страницы на **50–250**
  - итоговая страница ограничена **1000**
- фиксированный seed (`mt19937(123456)`) — результаты воспроизводимы

```bash
g++ -O2 generator.cpp -o gen
./gen > input.txt

```markdown
---

## Запуск бенчмарков

Компиляция реализаций:

```bash
g++ -O2 reading_naive.cpp   -o naive
g++ -O2 reading_sqrt.cpp    -o sqrt
g++ -O2 reading_fenwick.cpp -o fenwick

```markdown
---

## Выводы

- **Naive-решение** существенно проигрывает из-за обновлений с асимптотикой **O(page)**.
- **Sqrt-decomposition** и **Fenwick Tree** работают на порядки быстрее по алгоритму.
- При большом объёме данных основным узким местом становится **скорость ввода**, а не структура данных.
- **Fenwick Tree** показывает лучший баланс между простотой реализации и асимптотикой.

Проект предназначен для учебного сравнения алгоритмических подходов
и анализа влияния асимптотики и I/O на производительность.
